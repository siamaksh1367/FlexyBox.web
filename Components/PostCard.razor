@inject NavigationManager NavigationManager

<div class="card mb-4 h-100 d-flex flex-column" style="min-height: 100%;">
    @if (GetPostResponse.Image != null && GetPostResponse.Image.Length > 0)
    {
        <img src="@($"data:image/png;base64,{Convert.ToBase64String(GetPostResponse.Image)}")"
             class="card-img-top"
             style="max-width: 100px; max-height: 100px; height: auto; width: auto;"
             alt="Post Image">
    }
    else
    {
        <div class="d-flex justify-content-center align-items-center"
             style="height: 100px; width: 100px; background-color: #f0f0f0;">
            <span class="text-muted">No Image</span>
        </div>
    }

    <div class="card-body d-flex flex-column justify-content-between flex-grow-1">
        <h5 class="card-title">
            @if (!string.IsNullOrWhiteSpace(GetPostResponse.Title))
            {
                @GetPostResponse.Title
            }
            else
            {
                <span class="text-muted">Untitled Post</span>
            }
        </h5>

        <p class="card-text">
            <small class="text-muted">Category: @GetPostResponse.Category ?? "Uncategorized"</small><br />
            <small class="text-muted">Comments: @GetPostResponse.CommentsCount</small><br />
            <small class="text-muted">Posted by: @GetPostResponse.UserName ?? "Anonymous"</small>
        </p>

        <div class="mb-2">
            @if (GetPostResponse.Tags != null && GetPostResponse.Tags.Any())
            {
                @foreach (var tag in GetPostResponse.Tags)
                {
                    <span class="badge bg-primary me-2">@tag</span>
                }
            }
            else
            {
                <span class="text-muted">No tags</span>
            }
        </div>

        <div class="mt-auto">
            <button class="btn btn-primary" @onclick="NavigateToPostDetails">Read More</button>
        </div>
    </div>
</div>
