@using FlexyBox.contract.Services
@using FlexyBox.core.Queries.SearchTag

<div class="position-relative">
    <input type="text" @bind-value="@searchTerm" @oninput="OnInputChange" @onkeydown="HandleKeyDown" class="form-control" placeholder="Type a tag..." />
    @if (_filteredTags.Count > 0)
    {
        <div class="dropdown-menu show" style="max-height: 200px; overflow-y: auto; position: absolute; z-index: 1050;">
            @foreach (var tag in _filteredTags)
            {
                <button type="button" class="dropdown-item" @onclick="() => SelectItem(tag)">
                    @tag.Name
                </button>
            }
        </div>
    }
</div>

<h5>Selected Tags</h5>
<div class="d-flex flex-wrap">
    @foreach (var tag in _selectedTags)
    {
        <span class="badge bg-primary me-2">
            @tag.Name
            <button type="button" class="btn-close btn-close-white ms-2" @onclick="() => DeleteSelectedTag(tag)" aria-label="Close"></button>
        </span>
    }
</div>
